<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Register Participant</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 p-10">
    <div class="max-w-xl mx-auto bg-white p-8 rounded shadow">
        <h1 class="text-2xl font-bold mb-6">Register Participant</h1>

        <!-- Mensaje de Ã©xito -->
        {% if message %}
            <div class="bg-green-100 text-green-800 p-4 mb-4 rounded">
                {{ message }}
            </div>
        {% endif %}

        <!-- Formulario -->
        <form id="registerForm" method="post" class="space-y-4">
            <div>
                <label class="block mb-1 font-medium">Full Name:</label>
                <input name="name" value="{{ form_data.name or '' }}" class="w-full p-2 border rounded" required>
                {% if errors.name %}
                    <p class="text-red-600 text-sm">{{ errors.name }}</p>
                {% endif %}
            </div>

            <div>
                <label class="block mb-1 font-medium">Birth Date:</label>
                <input type="date" name="birth_date" value="{{ form_data.birth_date or '' }}" class="w-full p-2 border rounded" required>
                {% if errors.birth_date %}
                    <p class="text-red-600 text-sm">{{ errors.birth_date }}</p>
                {% endif %}
            </div>

            <div>
                <label class="block mb-1 font-medium">Weight (kg):</label>
                <input type="number" step="0.1" name="weight" value="{{ form_data.weight or '' }}" class="w-full p-2 border rounded" required>
                {% if errors.weight %}
                    <p class="text-red-600 text-sm">{{ errors.weight }}</p>
                {% endif %}
            </div>

            <div>
                <label class="block mb-1 font-medium">Height (cm):</label>
                <input type="number" step="0.1" name="height" value="{{ form_data.height or '' }}" class="w-full p-2 border rounded" required>
                {% if errors.height %}
                    <p class="text-red-600 text-sm">{{ errors.height }}</p>
                {% endif %}
            </div>

            <div>
                <label class="block mb-1 font-medium">Academy:</label>
                <input name="academy" value="{{ form_data.academy or '' }}" class="w-full p-2 border rounded" required>
                {% if errors.academy %}
                    <p class="text-red-600 text-sm">{{ errors.academy }}</p>
                {% endif %}
            </div>

            <div>
                <label class="block mb-1 font-medium">Category:</label>
                <input name="category" value="{{ form_data.category or '' }}" class="w-full p-2 border rounded" required>
                {% if errors.category %}
                    <p class="text-red-600 text-sm">{{ errors.category }}</p>
                {% endif %}
            </div>

            <div>
                <label class="block mb-1 font-medium">Email:</label>
                <input type="email" name="email" value="{{ form_data.email or '' }}" class="w-full p-2 border rounded" required>
                {% if errors.email %}
                    <p class="text-red-600 text-sm">{{ errors.email }}</p>
                {% endif %}
            </div>

            <div>
                <label class="block mb-1 font-medium">Grade:</label>
                <input name="grade" value="{{ form_data.grade or '' }}" class="w-full p-2 border rounded">
                {% if errors.grade %}
                    <p class="text-red-600 text-sm">{{ errors.grade }}</p>
                {% endif %}
            </div>

            <div>
                <label class="block mb-1 font-medium">Belt:</label>
                <input name="belt" value="{{ form_data.belt or 'white' }}" class="w-full p-2 border rounded">
                {% if errors.belt %}
                    <p class="text-red-600 text-sm">{{ errors.belt }}</p>
                {% endif %}
            </div>

            <div>
                <label class="block mb-1 font-medium">Torneo:</label>
                <input name="torneo" value="{{ form_data.torneo or '' }}" class="w-full p-2 border rounded" required>
                {% if errors.torneo %}
                    <p class="text-red-600 text-sm">{{ errors.torneo }}</p>
                {% endif %}
            </div>

            <!-- Error general -->
            {% if errors.general %}
                <div class="bg-red-100 text-red-800 p-4 mb-4 rounded">
                    {{ errors.general }}
                </div>
            {% endif %}

            <div>
                <button type="submit" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded">
                    Register
                </button>
            </div>
        </form>
    </div>

    <!-- Loading Spinner -->
    <div id="loading" class="hidden fixed inset-0 bg-gray-800 bg-opacity-50 flex items-center justify-center">
        <div class="loader ease-linear rounded-full border-8 border-t-8 border-gray-200 h-24 w-24"></div>
    </div>

    <script>
        const form = document.getElementById('registerForm');
        const loading = document.getElementById('loading');

        form.addEventListener('submit', () => {
            loading.classList.remove('hidden');
        });
    </script>

    <style>
        .loader {
            border-top-color: #1DB954; /* Verde Spotify */
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</body>
</html>